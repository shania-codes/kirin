{% extends "base.html" %}

{% block title %}
Kirinify
{% endblock %}

{% block header %}
Kirinify
{% endblock %}


{% block body %}
<h2>Upload</h2>
<form method="post" enctype=multipart/form-data>
    <label>Audio files</label>
    <input type="file" name="audio" accept="audio/flac, audio/mp3"><!--multiple>-->
    <button  type="submit">Submit</button>
</form>


<br><h2>Now Playing</h2>
<div id="now_playing">
    <audio id="current_song" controls autoplay></audio>
</div>
<style>
    #current_song {
        border: solid brown 8px;
        /*padding: 0px;*/
        border-radius: 90px;
    }
</style>

<br><h2>File List</h2>
<ul>
{% for file in files %}
    <li id="li{{ loop.index0 }}" style="display:inline;">{{file}}</li>
    <button style="display:inline;" onclick="current_song.src = './static/{{files[loop.index0]}}'"; >Play</button><br>
{% endfor %}
</ul>


{#
<br><h2>Queue</h2>
<ul>
{% for song in queue %}
    <li>{{song}}</li>
    Add id=song_{id}, play button, add/remove from queue button, move up/down in queue buttons
    <br>
{% endfor %}
</ul>
#}





<script>
    const current_song = document.getElementById("current_song");
    current_song.src = "./static/{{files[0]}}"; // Set current song to the first file (sorted ?alphabetically?)
    let all_songs = [];
    {% for file in files %}
    all_songs.push("{{file}}");
    {% endfor %}
</script>



{% endblock %}